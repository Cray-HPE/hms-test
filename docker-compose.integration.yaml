version: '3.7'
#THIS environment sets up all of FAS
#  All dependencies -> HSM (vault, hm-collector, kafka), RTS (red fish sims) are all setup and active.
#  The FAS binary is active
#  NO ports are exposed to the local system.
#  This will be used for integration testing
networks:
  smoke:

services:
  functional_test:
    build:
      context: .
      dockerfile: Dockerfile
    command: ["functional","-c", "/src/libs/tavern_global_config_integration_test.yaml","-p","/src/libs"]
    depends_on:
      - httpbin
    networks:
      - smoke
  smoke_test:
    build:
      context: .
      dockerfile: Dockerfile
    command: ["smoke","-f", "/src/libs/example_smoke.json"]
    depends_on:
      - httpbin
    networks:
      - smoke
  httpbin:
    image:  artifactory.algol60.net/docker.io/kennethreitz/httpbin
    hostname: httpbin
    networks:
      - smoke

